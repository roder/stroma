---
description: Cryptographic patterns and ZK-proof implementation standards
globs: **/*crypto*.rs,**/*zk*.rs,**/*proof*.rs
alwaysApply: false
---

# Cryptography & Zero-Knowledge Standards

**Canonical Source**: `.beads/cryptography-zk.bead`

All ZK-proof requirements, PSI patterns, Merkle tree implementation, key management, and memory security standards are defined in the cryptography-zk bead. Read that file for complete specifications.

## Key Points

- **ZK-Proofs**: Use arkworks for ZK-SNARK circuits
- **Verification**: Bot-side for Phase 0 (winterfell native, not Wasm)
- **Merkle Trees**: Generate on-demand from BTreeSet (0.09ms at 1000 members)
- **Storage**: Store outcomes only, not proofs (Q6 decision)
- **PSI-CA**: Commutative encryption for anonymous overlap calculation

## Spike Week References

- Q4: Bot-side STARK verification (Wasm experimental)
- Q5: On-demand Merkle generation (0.09ms at 1000 members)
- Q6: Store outcomes only (proofs are ephemeral)

## Memory Security

- Use `zeroize` crate for all sensitive buffers
- Purge immediately after cryptographic operations
- Never leave keys or identifiers in memory longer than necessary
