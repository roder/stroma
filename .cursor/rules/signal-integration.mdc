---
description: Signal protocol integration patterns and bot behavior
globs: **/*signal*.rs,**/*bot*.rs
alwaysApply: false
---

# Signal Integration Standards

**Canonical Source**: `.beads/signal-integration.bead`

Complete Signal integration patterns, bot roles, ejection protocol, privacy-first UX, voting interface, and data handling requirements are defined in the signal-integration bead. Read that file for complete specifications.

## Key Architecture

- **Secondary Device**: Bot links to existing Signal account (no primary registration)
- **Real-Time Monitoring**: Subscribe to Freenet state stream (never poll)
- **Privacy-First**: All vetting in 1-on-1 PMs
- **Structured Voting**: Native Signal Polls (not reactions)

## Bot Roles

| Role | Scope | Function |
|------|-------|----------|
| Gatekeeper | Single group | Enforce GroupConfig vouch threshold |
| Blind Matchmaker (Admission) | Internal | Select cross-cluster assessor for invitees |
| Blind Matchmaker (Mesh) | Internal | Suggest strategic introductions between existing members |
| Diplomat | External | Federation proposals |
| Health Monitor | Continuous | Trust standing checks |

**Critical**: Bot belongs to ONE Signal group only. No secondary chats. Assessor contacts invitee independently.

## Ejection Triggers (Immediate)

1. `Standing < 0` (too many flags)
2. `Effective_Vouches < MIN_VOUCH_THRESHOLD` (voucher left or flagged)

No grace periods. Vouch invalidation applies (voucher-flagger = vouch removed).

## Data Handling

- NEVER store Signal IDs in cleartext
- HMAC hash immediately with ACI-derived key
- Zeroize sensitive buffers
- Delete vetting session data after admission
