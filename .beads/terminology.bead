# Stroma Terminology (CANONICAL)

**Status**: Reference - All documentation MUST use these definitions
**Created**: 2026-01-28
**Applies To**: All docs, rules, beads, code comments, user-facing messages

## Purpose

This bead is the **single source of truth** for Stroma terminology. All documentation, rules, and code comments MUST use these definitions consistently. When in doubt, reference this file.

## Core Terms

### Group & Network

| Term | Definition | Usage |
|------|------------|-------|
| **Group** | The Signal group ‚Äî the concrete chat where members communicate | "Join the group", "added to the group" |
| **Network** | The web of trust relationships ‚Äî who vouches for whom | "Position in the network", "network health" |

**Relationship**: You join the **group** (Signal chat) once you're vouched into the **network** (trust structure). The group is where you interact; the network is why you're trusted.

### Trust Actions

| Term | Definition | Usage |
|------|------------|-------|
| **Vouch** | A personal endorsement ‚Äî you stake your reputation on someone | "Alice vouched for Bob" |
| **Flag** | The opposite of a vouch ‚Äî indicates you no longer trust someone | "Carol flagged Dave" |
| **Invite** | The act of initiating someone's vetting; counts as first vouch | "Eve invited Frank" |

### Clusters

| Term | Definition | Usage |
|------|------------|-------|
| **Cluster** | A peer circle within the network ‚Äî people who know each other from the same social context | "The activist cluster", "same cluster" |
| **Cross-cluster** | From *different* peer circles ‚Äî required for admission and ongoing membership. **Technical precision**: Two vouchers are cross-cluster if NOT in the same connected component when considering only strong relationships (mutual vouches or 2+ degree separation). See `cross-cluster-requirement.bead` for formal definition. | "Cross-cluster vouch", "cross-cluster requirement" |
| **Same-cluster** | From the *same* peer circle ‚Äî does NOT count toward admission | "Same-cluster vouches don't count" |

**How to determine**: Ask "How do the two vouchers know each other?" If they're close friends or from the same social context, they're same-cluster.

### Member Roles

| Term | Definition | Vouch Count | Cluster Requirement | Status |
|------|------------|-------------|---------------------|--------|
| **Invitee** (aka Leaf Node) | Person being vetted | 1 vouch | ‚Äî | OUTSIDE group |
| **Bridge** | Minimum-requirement member | 2 vouches | 2 clusters | IN group |
| **Validator** | Well-connected member | 3+ vouches | 3+ clusters* | IN group |

*****Cluster requirement scales with vouch count**: Validators need vouches from as many distinct clusters as their vouch count (up to available clusters). If only 2 clusters exist, a 3-vouch Validator needs both clusters represented.

**Note**: Validators have NO special permissions ‚Äî only higher resilience and bot optimization preferences. Both Bridges and Validators can be selected as assessors.

**Terminology Note**: "Invitee" and "Leaf Node" are synonyms. Use "Invitee" in user-facing contexts (clearer meaning) and "Leaf Node" in graph-theory/algorithm contexts. Both refer to someone with 1 vouch who is OUTSIDE the group.

### Trust Calculations

| Term | Definition | Formula |
|------|------------|---------|
| **All Vouchers** | Set of members who vouched for you | ‚Äî |
| **All Flaggers** | Set of members who flagged you | ‚Äî |
| **Voucher-Flaggers** | Members who both vouched AND flagged (contradictory) | All_Vouchers ‚à© All_Flaggers |
| **Effective Vouches** | Vouches that count (excludes voucher-flaggers) | \|All_Vouchers\| - \|Voucher_Flaggers\| |
| **Regular Flags** | Flags from non-vouchers | \|All_Flaggers\| - \|Voucher_Flaggers\| |
| **Standing** | Your trust score | Effective_Vouches - Regular_Flags |

### Thresholds & Requirements

| Term | Definition | Default |
|------|------------|---------|
| **Cross-cluster minimum** | Must maintain vouches from as many clusters as vouch count (up to available) | min(vouches, clusters) |
| **Min vouch threshold** | Minimum effective vouches to stay in group | 2 vouches |
| **Standing threshold** | Minimum standing to stay in group | ‚â• 0 |

**Scaling rule**: A member with N vouches should have vouches from min(N, available_clusters) distinct clusters.

### Network Health Metrics

| Term | Definition | Formula |
|------|------------|---------|
| **Distinct Validator** | Validator whose voucher set doesn't overlap with other selected Validators | Greedy selection |
| **DVR (Distinct Validator Ratio)** | Primary health metric ‚Äî fraction of max possible distinct Validators | Distinct_Validators / (N / 4) |
| **Max Possible Distinct** | Maximum distinct Validators for network size N | floor(N / 4) |

### Trust Health Status (Three-Tier)

| Status | DVR Range | Color | Bot Behavior |
|--------|-----------|-------|--------------|
| **Unhealthy** | 0% - 33% | üî¥ | Actively suggest cross-cluster introductions |
| **Developing** | 33% - 66% | üü° | Suggest improvements opportunistically |
| **Healthy** | 66% - 100% | üü¢ | Maintenance mode |

**See**: `.beads/mesh-health-metric.bead` for full rationale

### Replication Health (Durability)

**Question Answered**: "Is my trust network data resilient?"

| Term | Definition | Formula/Value |
|------|------------|---------------|
| **Replication Health** | Whether trust state is safely backed up | Chunks_With_2+_Replicas / Total_Chunks |
| **Chunk** | 64KB piece of encrypted state | Each gets 3 copies (1 local + 2 remote) |
| **Holder** | Peer storing one chunk (deterministic per-chunk assignment) | Adversarial (can't read content) |

| Status | Chunk Health | Color | Recovery | Writes |
|--------|--------------|-------|----------|--------|
| **Replicated** | All chunks 3/3 | üü¢ | ‚úÖ Guaranteed | Allowed |
| **Partial** | Some chunks 2/3 | üü° | ‚úÖ Possible | Allowed |
| **At Risk** | Any chunk ‚â§1/3 | üî¥ | ‚ùå Not possible | **Blocked** |
| **Initializing** | Establishing | üîµ | ‚Äî | Limited |

**Key Point**: Measured at write time, NOT via heartbeats. We track whether the last replication succeeded per-chunk.

**See**: `.beads/persistence-model.bead` for full architecture

### Ejection Triggers

| Trigger | Condition | Result |
|---------|-----------|--------|
| **Standing violation** | Standing < 0 | Immediate ejection |
| **Vouch violation** | Effective vouches < min_vouch_threshold | Immediate ejection |
| **Cross-cluster violation** | Vouches from < 2 clusters (when 2+ clusters exist) | Immediate ejection |

### Special Cases

| Term | Definition |
|------|------------|
| **Bootstrap exception** | First 3-5 members exempt from cross-cluster (only 1 cluster exists) |
| **Vouch invalidation** | When a voucher flags someone, their vouch is invalidated |
| **Re-entry** | Ejected members can re-join by getting 2 new cross-cluster vouches |

### Cryptographic Terms

| Term | Definition |
|------|------------|
| **Signal ACI** | Account Identity ‚Äî the bot's Signal identity keypair used for all cryptographic operations |
| **ACI-derived key** | Keys derived from Signal ACI via HKDF for encryption, signing, and identity masking |
| **Identity masking** | HMAC-based hashing using ACI-derived key to convert Signal IDs to anonymous hashes |
| **Trust map** | The complete graph of members, vouches, and flags that defines the trust network's state |

**Note**: The codebase currently uses `BotConfig.pepper` for identity masking (~20 call sites). The architectural goal is to derive all cryptographic keys from the Signal ACI identity via HKDF, but this migration is not yet complete. Both `pepper` and ACI-derived key paths exist in code.

### Persistence Terms

| Term | Definition |
|------|------------|
| **Chunk** | 64KB piece of encrypted state (trust maps are split into chunks for distribution) |
| **Holder** | Peer bot storing a chunk for another bot (adversarial ‚Äî cannot read content) |
| **Replication factor** | Number of copies per chunk (default: 3 = 1 local + 2 remote) |
| **Replication Health** | Whether trust state is safely backed up across chunk holders |

### Discovery Terms

| Term | Definition |
|------|------------|
| **Social Anchor** | Hash of top-N validators used for federation discovery (Fibonacci bucket URIs) |
| **Persistence Registry** | Freenet contract listing all Stroma bots for chunk holder computation |
| **Rendezvous hashing** | Deterministic algorithm to compute chunk holders (not owner-chosen) |

### Vetting Roles

| Term | Definition | Usage |
|------|------------|-------|
| **Assessor** | A member (bridge or validator) selected by the Blind Matchmaker from a different cluster to independently contact and evaluate an invitee for admission. The assessor decides how to approach the invitee and whether to vouch. | "The bot selected Carol as assessor for the invitee" |

**Key Properties of the Assessor**:
- Can be any member (bridge or validator) -- both are eligible
- Must be from a different cluster than the inviter (cross-cluster requirement)
- Selected via DVR-optimized algorithm (prefer non-overlapping voucher sets)
- Contacts the invitee **independently of the bot** (bot only provides invitee contact info via PM)
- Chooses whether and how to reveal their own identity to the invitee
- Can decline via `/reject-intro @invitee` (bot selects another candidate)
- Identity is NOT revealed to the inviter (Blind Matchmaker)

### Bot Roles

| Role | Description |
|------|-------------|
| **Protocol Gatekeeper** | Enforces vouch threshold (per GroupConfig) for admission |
| **Blind Matchmaker** | Two distinct functions (see below) |
| **Health Monitor** | Continuously checks trust standing via state stream |
| **Diplomat** | Discovers and proposes federation (Phase 4+) |

### Two Distinct Blind Matchmaker Functions

The Blind Matchmaker has two architecturally separate roles:

| Function | Purpose | Module | Trigger |
|----------|---------|--------|---------|
| **Admission Vetting** | Selects a cross-cluster assessor to evaluate an invitee | `signal/matchmaker.rs` | `/invite` command |
| **Mesh Optimization** | Suggests strategic introductions between existing members to improve DVR | `matchmaker/strategic_intro.rs` | `/mesh` health suggestions, proactive bot behavior |

**Admission Vetting**: When a member invites someone, the bot selects an assessor from a different cluster and PMs them with the invitee's contact info. The assessor independently contacts the invitee to evaluate them. The bot never creates secondary chats or contacts the invitee directly.

**Mesh Optimization**: Between existing members already in the group, the bot suggests introductions to strengthen the trust graph (upgrade Bridges to Validators, connect isolated clusters). This is a separate concern from admission.

### Federation Terms (Phase 4+)

| Term | Definition |
|------|------------|
| **Federation** | Two groups connecting to share trust |
| **Overlap** | Members who are in both groups |
| **BidirectionalMin** | Each group applies its own threshold to decide |
| **Shadow Vouch** | Member from federated group vouches for invitee |

## Anti-Patterns (DO NOT USE)

| Wrong | Correct | Why |
|-------|---------|-----|
| "Admin" | "Member" or "Validator" | No hierarchy ‚Äî all members equal |
| "Approved" | "Vouched" | Trust is relational, not granted |
| "Waiting room" | "Invitee (outside group)" | Binary state, not a separate space |
| "Grace period" | ‚Äî | No grace periods ‚Äî ejection is immediate |
| "Permanent ban" | "Ejected (can re-enter)" | No permanence ‚Äî re-entry always possible |
| "Independent members" | "Members in different clusters" | Cross-cluster is the requirement |
| "Two vouches" | "Two cross-cluster vouches" | Must specify cross-cluster |

## Document References

Each document should include a terminology section or link:

| Document | Audience | Terminology |
|----------|----------|-------------|
| HOW-IT-WORKS.md | End users | Key Concepts table |
| USER-GUIDE.md | End users | Key Concepts table |
| TRUST-MODEL.md | Technical users | Key Terms table |
| DEVELOPER-GUIDE.md | Contributors | Link to this bead |
| ALGORITHMS.md | Contributors | Link to this bead |

## Updating This Bead

When terminology changes:
1. Update this bead FIRST
2. Then update all referencing documents
3. Use grep to find all usages: `rg "old_term" --type md`
4. Commit with message: "docs: Update terminology - [change description]"

## Related Documents

- `.cursor/rules/cluster-terminology.mdc` - Cluster-specific rules
- `docs/HOW-IT-WORKS.md` - User-facing explanations
- `docs/TRUST-MODEL.md` - Mathematical details
