# Bead: Development Environment Standards

**Status**: Operational Guidance  
**Created**: 2026-02-01  
**Context**: Agent Development Configuration

---

## Shell Configuration

### Primary Shell: Fish
- **Default Shell**: Use `fish` shell for all terminal operations
- **Path**: `/opt/homebrew/bin/fish` (Homebrew installation)
- **When to Use**: All terminal commands, scripts, and automation
- **Scripts**: Write shell scripts in fish syntax when possible

### Fish Shell Patterns
```fish
# ✅ GOOD: Fish shell syntax
set -x PATH $PATH /opt/homebrew/bin
set -gx CARGO_HOME $HOME/.cargo

# ❌ AVOID: Bash-specific syntax in fish
export PATH=$PATH:/opt/homebrew/bin  # Use 'set -x' instead
```

---

## Operating System

### Platform: macOS (darwin)
- **OS Version**: darwin 25.2.0
- **Package Manager**: Homebrew (`/opt/homebrew` for Apple Silicon)
- **Architecture**: Prefer ARM64/Apple Silicon native builds

---

## Rust Development

### Rust Version
- **Required**: Rust 1.93+ (for musl 1.2.5 with improved DNS resolver)
- **Why 1.93+**: Bundled musl 1.2.5 improves networking reliability for Signal and freenet-core

### Cargo Commands
- Run tests with: `cargo nextest run`
- Format with: `cargo fmt`
- Lint with: `cargo clippy -- -D warnings`
- Check dependencies: `cargo deny check`, `cargo crev verify`

### Build Targets
- **Development**: Native target for faster iteration
- **Production**: `x86_64-unknown-linux-musl` (static MUSL binary)

---

## Preferred Tools

### Beads CLI: `bd`
- Issue tracking and architectural constraints management
- Commands: `bd status`, `bd list`, `bd ready`, `bd show <id>`, `bd sync`
- `.bead` files are immutable architectural constraints (not task issues)

### HTTP Client: `xh` (preferred over curl)
- Modern, user-friendly HTTP client written in Rust
- Example: `xh GET https://api.example.com/endpoint`

### Container Runtime: `podman` (preferred over docker)
- Drop-in replacement for docker, daemonless, rootless

### Search Tool: `rg` (ripgrep, preferred over grep)
- Fast, recursive search with built-in gitignore support
- Example: `rg "pattern" --type rust`

---

## Anti-Patterns

### ❌ Avoid
- Don't use bash-specific syntax in fish shell
- Don't use `~` for home directory in tool calls (use `$HOME` or absolute path)
- Don't use `export` in fish (use `set -x` or `set -gx`)
- Don't use `curl` commands (use `xh` instead)
- Don't use `docker` commands (use `podman` instead)
- Don't use `grep` commands (use `rg` ripgrep instead)

### ✅ Prefer
- Use fish shell syntax for all commands
- Use absolute paths in tool calls
- Use `bd` for issue tracking and work management
